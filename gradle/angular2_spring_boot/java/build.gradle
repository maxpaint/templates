import org.gradle.example.task.GreetingTask

// Use the default greeting
task hello(type: GreetingTask)

// Customize the greeting
task greeting(type: GreetingTask) {
  greeting = 'greetings from GreetingTask'
}

task liquibaseRun(type: Exec){
    workingDir '../db/'

    //on windows:
    commandLine 'cmd', '/c', 'mvn', 'install', '-Pdev1'

    //store the output instead of printing to the console:
    standardOutput = new ByteArrayOutputStream()

    //extension method stopTomcat.output() can be used to obtain the output:
    ext.output = {
        return standardOutput.toString()
    }
}

task copyRestService(type: Copy, dependsOn: liquibaseRun){
    from 'project/src/main/java/com/mdanylenko/rs'
    exclude '**/*controller*'
    into 'rest-api/src/main/java/com/mdanylenko/rs/'
}

task java2tsRun(type: Exec, dependsOn: copyRestService){
    workingDir '/rest-api/'

    //on windows:
    commandLine 'cmd', '/c', 'mvn', 'install'

    //store the output instead of printing to the console:
    standardOutput = new ByteArrayOutputStream()

    //extension method stopTomcat.output() can be used to obtain the output:
    ext.output = {
        return standardOutput.toString()
    }
}

